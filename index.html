<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mi AL_IA_DA — Agente Soldado PNFT (ABJ)</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <header>
    <div class="hdr-left">
      <h1>Mi AL_IA_DA</h1>
      <div class="sub">Generador ABJ · Agente Soldado · PNFT</div>
    </div>
    <div class="hdr-right">
      <label class="small">Modo:
        <select id="agentMode">
          <option value="local">Local (fallback)</option>
          <option value="soldado">Soldado IA (n8n)</option>
        </select>
      </label>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h3>Configuración & fuentes</h3>
      <p>PNFT Data: <code>pnft-data.js</code> (coloca aquí tu pnft-datos-js.js real).</p>
      <label>Webhook n8n (opcional)</label>
      <input id="n8nUrl" placeholder="https://ejemplo.n8n.cloud/webhook/XXXX" />
      <button id="saveWebhook" class="btn small">Guardar webhook</button>
      <p class="hint">Si dejas vacío, se usará la IA local simulada (offline)</p>
    </section>

    <section class="card grid">
      <div class="left">
        <h3>1. Seleccione niveles</h3>
        <select id="levels" multiple size="8"></select>

        <h3>2. Seleccione hasta 4 áreas</h3>
        <div id="areasContainer" class="chip-container"></div>

        <h3>3. Seleccione saberes</h3>
        <div id="saberesContainer" class="saberes-box"></div>

        <label>Resultado de Aprendizaje (RDA)</label>
        <textarea id="rda" rows="3">Desarrollar habilidades de pensamiento computacional aplicadas a problemas reales.</textarea>

        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="generateBtn" class="btn">Generar Planeamiento</button>
          <button id="exportBtn" class="btn alt">Exportar (HTML)</button>
        </div>

        <div style="margin-top:8px">
          <label>Modo de salida</label>
          <select id="outputFormat">
            <option value="text">Texto simple</option>
            <option value="html">HTML (formateado)</option>
            <option value="docx">Word (.docx) - requiere servidor o convertir manualmente</option>
          </select>
        </div>
      </div>

      <div class="right">
        <h3>Vista previa / Planeamientos generados</h3>
        <div id="plansContainer"></div>

        <h4>Cola offline (pendientes)</h4>
        <div id="queueList" class="queue-box"></div>
      </div>
    </section>

    <section class="card">
      <h3>Ayuda rápida</h3>
      <p>Modo <b>Soldado IA</b>: envía solicitudes al webhook n8n, que debe procesarlas (ej. llamar a OpenAI) y devolver un JSON con campo <code>textoGenerado</code>. Si no hay conexión, las peticiones se ponen en cola en el almacenamiento local y se reenvían cuando vuelvas online.</p>
    </section>
  </main>

  <script src="pnft-data.js"></script> <!-- Reemplazar con tu pnft-datos-js.js real -->
  <script src="app.js"></script>
</body>
</html>
